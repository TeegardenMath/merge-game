<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merge Game</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Database of categories with their items
        const CATEGORIES = {
          "U.S. State Capitals": [
            "Montgomery", "Juneau", "Phoenix", "Little Rock", "Sacramento", "Denver", "Hartford", 
            "Dover", "Tallahassee", "Atlanta", "Honolulu", "Boise", "Springfield", "Indianapolis",
            "Des Moines", "Topeka", "Frankfort", "Baton Rouge", "Augusta", "Annapolis", "Boston",
            "Lansing", "St. Paul", "Jackson", "Jefferson City", "Helena", "Lincoln", "Carson City",
            "Concord", "Trenton", "Santa Fe", "Albany", "Raleigh", "Bismarck", "Columbus", 
            "Oklahoma City", "Salem", "Harrisburg", "Providence", "Columbia", "Pierre", "Nashville",
            "Austin", "Salt Lake City", "Montpelier", "Richmond", "Olympia", "Charleston", "Madison", "Cheyenne"
          ],
          "Pantone Colors": [
            "Cerulean", "Tigerlily", "Aqua Sky", "True Red", "Fuchsia Rose", "Blue Turquoise", 
            "Sand Dollar", "Chili Pepper", "Blue Iris", "Honeysuckle", "Turquoise", "Tangerine Tango",
            "Emerald", "Radiant Orchid", "Marsala", "Rose Quartz", "Serenity", "Greenery", 
            "Ultra Violet", "Living Coral", "Classic Blue", "Illuminating", "Ultimate Gray",
            "Very Peri", "Viva Magenta", "Peach Fuzz", "Mimosa", "Pink Flamingo", "Sunset Orange",
            "Lavender", "Mint", "Coral Pink", "Sky Blue", "Lemon Zest", "Berry", "Plum", "Olive",
            "Burgundy", "Navy", "Charcoal", "Ivory", "Cream", "Beige", "Taupe", "Moss", "Sage",
            "Teal", "Periwinkle", "Mauve", "Crimson", "Scarlet", "Ruby", "Amber", "Gold"
          ],
          "Dinosaurs": [
            "Tyrannosaurus", "Triceratops", "Velociraptor", "Stegosaurus", "Brachiosaurus",
            "Ankylosaurus", "Pteranodon", "Diplodocus", "Allosaurus", "Spinosaurus", "Parasaurolophus",
            "Iguanodon", "Compsognathus", "Pachycephalosaurus", "Brontosaurus", "Apatosaurus",
            "Carnotaurus", "Dilophosaurus", "Gallimimus", "Corythosaurus", "Styracosaurus",
            "Deinonychus", "Archaeopteryx", "Protoceratops", "Oviraptor", "Therizinosaurus",
            "Giganotosaurus", "Carcharodontosaurus", "Acrocanthosaurus", "Ceratosaurus",
            "Kentrosaurus", "Euoplocephalus", "Nodosaurus", "Edmontosaurus", "Maiasaura",
            "Lambeosaurus", "Ornithomimus", "Struthiomimus", "Dromaeosaurus", "Utahraptor",
            "Argentinosaurus", "Sauroposeidon", "Supersaurus", "Seismosaurus", "Camarasaurus",
            "Plateosaurus", "Coelophysis", "Herrerasaurus", "Eoraptor", "Microraptor",
            "Sinornithosaurus", "Beipiaosaurus", "Yutyrannus", "Citipati"
          ],
          "Chemical Elements": [
            "Hydrogen", "Helium", "Lithium", "Beryllium", "Boron", "Carbon", "Nitrogen", "Oxygen",
            "Fluorine", "Neon", "Sodium", "Magnesium", "Aluminum", "Silicon", "Phosphorus", "Sulfur",
            "Chlorine", "Argon", "Potassium", "Calcium", "Scandium", "Titanium", "Vanadium", "Chromium",
            "Manganese", "Iron", "Cobalt", "Nickel", "Copper", "Zinc", "Gallium", "Germanium",
            "Arsenic", "Selenium", "Bromine", "Krypton", "Rubidium", "Strontium", "Yttrium", "Zirconium",
            "Niobium", "Molybdenum", "Technetium", "Ruthenium", "Rhodium", "Palladium", "Silver",
            "Cadmium", "Indium", "Tin", "Antimony", "Tellurium", "Iodine", "Xenon"
          ],
          "Pizza Toppings": [
            "Pepperoni", "Mushrooms", "Onions", "Sausage", "Bacon", "Olives", "Peppers", "Pineapple",
            "Spinach", "Tomatoes", "Chicken", "Ham", "Beef", "Anchovies", "Basil", "Garlic",
            "JalapeÃ±os", "Ricotta", "Feta", "Meatballs", "Salami", "Prosciutto", "Arugula", "Artichokes",
            "Broccoli", "Zucchini", "Eggplant", "Corn", "Pesto", "BBQ Sauce", "Ranch", "Buffalo Sauce",
            "Sun-dried Tomatoes", "Roasted Peppers", "Capers", "Gorgonzola", "Provolone", "Goat Cheese",
            "Parmesan", "Cheddar", "Mozzarella", "Shrimp", "Clams", "Tuna", "Salmon", "Chorizo",
            "Pulled Pork", "Steak", "Turkey", "Eggs", "Potatoes", "Pickles", "Kimchi", "Sriracha"
          ]
        };

        const MergeGame = () => {
          const [items, setItems] = useState([]);
          const [selected, setSelected] = useState([]);
          const [won, setWon] = useState(false);

          const initializeGame = () => {
            const categoryNames = Object.keys(CATEGORIES);
            const numCategories = Math.min(5, categoryNames.length);
            const shuffledCategories = [...categoryNames].sort(() => Math.random() - 0.5);
            const selectedCategories = shuffledCategories.slice(0, numCategories);
            
            const allItems = [];
            selectedCategories.forEach(category => {
              const categoryItems = CATEGORIES[category];
              const shuffled = [...categoryItems].sort(() => Math.random() - 0.5);
              const selected = shuffled.slice(0, 45);
              
              selected.forEach(item => {
                allItems.push({
                  id: Math.random().toString(36).substr(2, 9),
                  category,
                  items: [item],
                  displayText: item
                });
              });
            });
            
            const shuffledItems = allItems.sort(() => Math.random() - 0.5);
            setItems(shuffledItems);
            setSelected([]);
            setWon(false);
          };

          useEffect(() => {
            initializeGame();
          }, []);

          const toggleSelect = (id) => {
            if (selected.includes(id)) {
              setSelected(selected.filter(s => s !== id));
            } else {
              if (selected.length === 2) {
                setSelected([id]);
              } else {
                const newSelected = [...selected, id];
                setSelected(newSelected);
                
                if (newSelected.length === 2) {
                  setTimeout(() => attemptMerge(newSelected), 100);
                }
              }
            }
          };

          const attemptMerge = (selectedIds) => {
            const [id1, id2] = selectedIds;
            const item1 = items.find(i => i.id === id1);
            const item2 = items.find(i => i.id === id2);
            
            if (item1.category === item2.category) {
              const mergedItems = [...item1.items, ...item2.items];
              const displayText = mergedItems.length <= 3 
                ? mergedItems.join(", ")
                : `${mergedItems.slice(0, 3).join(", ")}... [${mergedItems.length}]`;
              
              const newItem = {
                id: Math.random().toString(36).substr(2, 9),
                category: item1.category,
                items: mergedItems,
                displayText
              };
              
              const newItems = items
                .filter(i => i.id !== id1 && i.id !== id2)
                .concat(newItem);
              
              setItems(newItems);
              setSelected([]);
              
              if (newItems.every(item => item.items.length === 45)) {
                setWon(true);
              }
            } else {
              setSelected([]);
            }
          };

          const getGridColumns = () => {
            const totalItems = items.length;
            if (totalItems <= 25) return 5;
            if (totalItems <= 64) return 8;
            if (totalItems <= 100) return 10;
            if (totalItems <= 144) return 12;
            return 15;
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 p-8">
              <div className="max-w-7xl mx-auto">
                <div className="text-center mb-8">
                  <h1 className="text-4xl font-bold text-gray-800 mb-2">Merge Game</h1>
                  <p className="text-gray-600 mb-4">
                    Select two items from the same category to merge them. Win by creating piles of 45!
                  </p>
                  <button
                    onClick={initializeGame}
                    className="inline-flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors"
                  >
                    ðŸ”„ New Game
                  </button>
                </div>

                {won && (
                  <div className="bg-green-100 border-2 border-green-500 rounded-lg p-6 mb-6 text-center">
                    <h2 className="text-3xl font-bold text-green-800">ðŸŽ‰ You Won! ðŸŽ‰</h2>
                    <p className="text-green-700 mt-2">All categories merged successfully!</p>
                  </div>
                )}

                <div className="bg-white rounded-xl shadow-lg p-6">
                  <div className="mb-4 text-sm text-gray-600">
                    Items remaining: {items.length} | Selected: {selected.length}/2
                  </div>
                  
                  <div 
                    className="grid gap-2"
                    style={{
                      gridTemplateColumns: `repeat(${getGridColumns()}, minmax(0, 1fr))`
                    }}
                  >
                    {items.map(item => (
                      <button
                        key={item.id}
                        onClick={() => toggleSelect(item.id)}
                        className={`
                          p-3 rounded-lg border-2 transition-all text-sm font-medium
                          ${selected.includes(item.id) 
                            ? 'border-indigo-500 bg-indigo-100 shadow-md scale-105' 
                            : 'border-gray-300 bg-white hover:border-indigo-300 hover:shadow'
                          }
                          ${item.items.length > 1 ? 'bg-gradient-to-br from-purple-50 to-pink-50' : ''}
                        `}
                      >
                        <div className="break-words text-center">
                          {item.displayText}
                        </div>
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          );
        };

        ReactDOM.render(<MergeGame />, document.getElementById('root'));
    </script>
</body>
</html>
